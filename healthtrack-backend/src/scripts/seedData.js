/**
 * åˆå§‹æ•°æ®å¯¼å…¥è„šæœ¬
 * å¯¼å…¥å¥åº·ç™¾ç§‘å’Œè¿åŠ¨å»ºè®®çš„é¢„è®¾æ•°æ®
 */

const mysql = require('mysql2/promise');
const { v4: uuidv4 } = require('uuid');
require('dotenv').config();

// å¥åº·ç™¾ç§‘æ•°æ®
const healthTips = [
  // è¥å…»è†³é£Ÿ
  { title: 'å‡è¡¡é¥®é£Ÿçš„é‡è¦æ€§', content: 'å‡è¡¡é¥®é£Ÿæ˜¯ç»´æŒèº«ä½“å¥åº·çš„åŸºç¡€ã€‚æ¯å¤©åº”è¯¥æ‘„å…¥é€‚é‡çš„è›‹ç™½è´¨ã€ç¢³æ°´åŒ–åˆç‰©ã€è„‚è‚ªã€ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨ã€‚å»ºè®®æ¯é¤åŒ…å«ï¼š1/2ç›˜è”¬èœå’Œæ°´æœã€1/4ç›˜ä¼˜è´¨è›‹ç™½ï¼ˆå¦‚é±¼è‚‰ã€é¸¡è‚‰ã€è±†åˆ¶å“ï¼‰ã€1/4ç›˜å…¨è°·ç‰©ï¼ˆå¦‚ç³™ç±³ã€å…¨éº¦é¢åŒ…ï¼‰ã€‚', category: 'è¥å…»è†³é£Ÿ', sortOrder: 1 },
  { title: 'æ¯æ—¥é¥®æ°´æŒ‡å—', content: 'äººä½“çº¦60%ç”±æ°´ç»„æˆï¼Œä¿æŒå……è¶³çš„æ°´åˆ†æ‘„å…¥è‡³å…³é‡è¦ã€‚å»ºè®®æˆäººæ¯å¤©é¥®æ°´é‡ä¸º1500-2000æ¯«å‡ï¼ˆçº¦8æ¯æ°´ï¼‰ã€‚è¿åŠ¨åã€å¤©æ°”ç‚çƒ­æ—¶éœ€è¦å¢åŠ é¥®æ°´é‡ã€‚æœ€å¥½åˆ†å¤šæ¬¡å°‘é‡é¥®ç”¨ï¼Œé¿å…ä¸€æ¬¡æ€§å¤§é‡é¥®æ°´ã€‚', category: 'è¥å…»è†³é£Ÿ', sortOrder: 2 },
  { title: 'å‡å°‘ç›åˆ†æ‘„å…¥', content: 'è¿‡é‡çš„ç›åˆ†æ‘„å…¥ä¼šå¢åŠ é«˜è¡€å‹å’Œå¿ƒè¡€ç®¡ç–¾ç—…çš„é£é™©ã€‚ä¸–ç•Œå«ç”Ÿç»„ç»‡å»ºè®®æˆäººæ¯å¤©ç›æ‘„å…¥é‡ä¸è¶…è¿‡5å…‹ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨é¦™æ–™ä»£æ›¿ç›ã€å°‘åƒåŠ å·¥é£Ÿå“ã€é€‰æ‹©ä½é’ äº§å“ç­‰æ–¹å¼å‡å°‘ç›åˆ†æ‘„å…¥ã€‚', category: 'è¥å…»è†³é£Ÿ', sortOrder: 3 },
  { title: 'ä¼˜è´¨è›‹ç™½è´¨æ¥æº', content: 'è›‹ç™½è´¨æ˜¯èº«ä½“ç»†èƒä¿®å¤å’Œç”Ÿé•¿çš„é‡è¦è¥å…»ç´ ã€‚ä¼˜è´¨è›‹ç™½è´¨æ¥æºåŒ…æ‹¬ï¼šé±¼ç±»ï¼ˆå¯Œå«omega-3è„‚è‚ªé…¸ï¼‰ã€é¸¡èƒ¸è‚‰ã€é¸¡è›‹ã€è±†è…å’Œè±†ç±»ã€ç‰›å¥¶å’Œä¹³åˆ¶å“ã€ç˜¦ç‰›è‚‰ã€‚å»ºè®®æ¯å¤©æ‘„å…¥ä½“é‡æ¯å…¬æ–¤0.8-1å…‹è›‹ç™½è´¨ã€‚', category: 'è¥å…»è†³é£Ÿ', sortOrder: 4 },
  
  // è¿åŠ¨å¥èº«
  { title: 'æ¯å¤©è¿åŠ¨30åˆ†é’Ÿ', content: 'ä¸–ç•Œå«ç”Ÿç»„ç»‡å»ºè®®æˆå¹´äººæ¯å‘¨è‡³å°‘è¿›è¡Œ150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§è¿åŠ¨æˆ–75åˆ†é’Ÿé«˜å¼ºåº¦æœ‰æ°§è¿åŠ¨ã€‚å¯ä»¥åˆ†è§£ä¸ºæ¯å¤©30åˆ†é’Ÿçš„ä¸­ç­‰å¼ºåº¦è¿åŠ¨ï¼Œå¦‚å¿«èµ°ã€éª‘è‡ªè¡Œè½¦ã€æ¸¸æ³³ç­‰ã€‚è¿åŠ¨ä¸ä»…èƒ½ä¿æŒä½“é‡ï¼Œè¿˜èƒ½æ”¹å–„å¿ƒç†å¥åº·ã€‚', category: 'è¿åŠ¨å¥èº«', sortOrder: 1 },
  { title: 'æ­£ç¡®çš„è·‘æ­¥å§¿åŠ¿', content: 'æ­£ç¡®çš„è·‘æ­¥å§¿åŠ¿å¯ä»¥æé«˜æ•ˆç‡å¹¶å‡å°‘å—ä¼¤é£é™©ï¼šä¿æŒå¤´éƒ¨æ­£ç›´ã€ç›®è§†å‰æ–¹ï¼›è‚©è†€æ”¾æ¾ã€æ‰‹è‡‚è‡ªç„¶æ‘†åŠ¨ï¼›æ ¸å¿ƒæ”¶ç´§ã€èº«ä½“ç•¥å¾®å‰å€¾ï¼›è„šæŒä¸­éƒ¨ç€åœ°ã€æ­¥å¹…é€‚ä¸­ã€‚å»ºè®®åˆå­¦è€…ä»æ…¢è·‘å¼€å§‹ï¼Œé€æ¸å¢åŠ è·ç¦»å’Œé€Ÿåº¦ã€‚', category: 'è¿åŠ¨å¥èº«', sortOrder: 2 },
  { title: 'æ‹‰ä¼¸çš„é‡è¦æ€§', content: 'è¿åŠ¨å‰åçš„æ‹‰ä¼¸å¯ä»¥é¢„é˜²å—ä¼¤ã€å‡å°‘è‚Œè‚‰é…¸ç—›ã€æé«˜æŸ”éŸ§æ€§ã€‚è¿åŠ¨å‰è¿›è¡Œ5-10åˆ†é’Ÿçš„åŠ¨æ€æ‹‰ä¼¸ï¼ˆå¦‚é«˜æŠ¬è…¿ã€å¼“æ­¥èµ°ï¼‰ï¼›è¿åŠ¨åè¿›è¡Œé™æ€æ‹‰ä¼¸ï¼Œæ¯ä¸ªåŠ¨ä½œä¿æŒ15-30ç§’ã€‚', category: 'è¿åŠ¨å¥èº«', sortOrder: 3 },
  { title: 'åŠ›é‡è®­ç»ƒå…¥é—¨', content: 'åŠ›é‡è®­ç»ƒæœ‰åŠ©äºå¢åŠ è‚Œè‚‰é‡ã€æé«˜åŸºç¡€ä»£è°¢ç‡ã€å¢å¼ºéª¨å¯†åº¦ã€‚åˆå­¦è€…å¯ä»¥ä»ä»¥ä¸‹åŠ¨ä½œå¼€å§‹ï¼šä¿¯å§æ’‘ã€æ·±è¹²ã€å¹³æ¿æ”¯æ’‘ã€å¼“ç®­æ­¥ã€‚æ¯å‘¨è¿›è¡Œ2-3æ¬¡åŠ›é‡è®­ç»ƒï¼Œæ¯æ¬¡20-30åˆ†é’Ÿã€‚', category: 'è¿åŠ¨å¥èº«', sortOrder: 4 },
  
  // ç¡çœ å¥åº·
  { title: 'ä¼˜è´¨ç¡çœ çš„é‡è¦æ€§', content: 'ç¡çœ å¯¹èº«ä½“æ¢å¤å’Œå¤§è„‘åŠŸèƒ½è‡³å…³é‡è¦ã€‚æˆå¹´äººæ¯æ™šéœ€è¦7-9å°æ—¶çš„ç¡çœ ã€‚å……è¶³çš„ç¡çœ å¯ä»¥ï¼šå¢å¼ºå…ç–«åŠ›ã€æ”¹å–„è®°å¿†åŠ›ã€è°ƒèŠ‚æƒ…ç»ªã€ç»´æŒå¥åº·ä½“é‡ã€é™ä½æ…¢æ€§ç—…é£é™©ã€‚', category: 'ç¡çœ å¥åº·', sortOrder: 1 },
  { title: 'æ”¹å–„ç¡çœ è´¨é‡çš„æ–¹æ³•', content: 'æé«˜ç¡çœ è´¨é‡çš„å»ºè®®ï¼šä¿æŒè§„å¾‹çš„ä½œæ¯æ—¶é—´ã€ç¡å‰é¿å…ä½¿ç”¨ç”µå­è®¾å¤‡ã€ç¡®ä¿å§å®¤å®‰é™ã€é»‘æš—ã€å‡‰çˆ½ã€é¿å…ç¡å‰é¥®ç”¨å’–å•¡å› å’Œé…’ç²¾ã€è¿›è¡Œæ”¾æ¾æ´»åŠ¨ï¼ˆå¦‚é˜…è¯»ã€å†¥æƒ³ï¼‰ã€‚', category: 'ç¡çœ å¥åº·', sortOrder: 2 },
  { title: 'ç¡çœ ä¸ä½“é‡çš„å…³ç³»', content: 'ç¡çœ ä¸è¶³ä¼šå½±å“è°ƒèŠ‚é£Ÿæ¬²çš„æ¿€ç´ ï¼ˆç˜¦ç´ å’Œé¥¥é¥¿ç´ ï¼‰ï¼Œå¯¼è‡´é£Ÿæ¬²å¢åŠ å’Œä»£è°¢ä¸‹é™ã€‚ç ”ç©¶è¡¨æ˜ï¼Œæ¯æ™šç¡çœ ä¸è¶³6å°æ—¶çš„äººæ›´å®¹æ˜“ä½“é‡å¢åŠ ã€‚ä¿æŒå……è¶³ç¡çœ æ˜¯ä½“é‡ç®¡ç†çš„é‡è¦ä¸€ç¯ã€‚', category: 'ç¡çœ å¥åº·', sortOrder: 3 },
  
  // å¿ƒç†å¥åº·
  { title: 'å‹åŠ›ç®¡ç†æŠ€å·§', content: 'é•¿æœŸå‹åŠ›ä¼šå½±å“èº«å¿ƒå¥åº·ã€‚æœ‰æ•ˆçš„å‹åŠ›ç®¡ç†æ–¹æ³•åŒ…æ‹¬ï¼šè§„å¾‹è¿åŠ¨ã€æ·±å‘¼å¸ç»ƒä¹ ã€å†¥æƒ³ã€ä¿æŒç¤¾äº¤è”ç³»ã€åˆç†å®‰æ’æ—¶é—´ã€å­¦ä¼šè¯´"ä¸"ã€åŸ¹å…»å…´è¶£çˆ±å¥½ã€‚', category: 'å¿ƒç†å¥åº·', sortOrder: 1 },
  { title: 'å†¥æƒ³å…¥é—¨æŒ‡å—', content: 'å†¥æƒ³æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ”¾æ¾å’Œå‡å‹æ–¹å¼ã€‚åˆå­¦è€…å¯ä»¥ä»æ¯å¤©5åˆ†é’Ÿå¼€å§‹ï¼šæ‰¾ä¸€ä¸ªå®‰é™çš„åœ°æ–¹åä¸‹ã€é—­ä¸Šçœ¼ç›ã€ä¸“æ³¨äºå‘¼å¸ã€å½“æ€ç»ªé£˜èµ°æ—¶è½»è½»å°†æ³¨æ„åŠ›æ‹‰å›å‘¼å¸ã€‚é€æ¸å¢åŠ æ—¶é—´è‡³15-20åˆ†é’Ÿã€‚', category: 'å¿ƒç†å¥åº·', sortOrder: 2 },
  { title: 'ä¿æŒç§¯æå¿ƒæ€', content: 'ç§¯æçš„å¿ƒæ€æœ‰åŠ©äºèº«å¿ƒå¥åº·ã€‚åŸ¹å…»ç§¯æå¿ƒæ€çš„æ–¹æ³•ï¼šæ¯å¤©å†™ä¸‰ä»¶æ„Ÿæ©çš„äº‹ã€ä¸“æ³¨äºè§£å†³é—®é¢˜è€ŒéæŠ±æ€¨ã€ä¸ç§¯æçš„äººäº¤å¾€ã€é™åˆ¶è´Ÿé¢æ–°é—»çš„æ¥è§¦ã€åº†ç¥å°çš„æˆå°±ã€‚', category: 'å¿ƒç†å¥åº·', sortOrder: 3 },
  
  // æ…¢ç—…é¢„é˜²
  { title: 'é¢„é˜²é«˜è¡€å‹', content: 'é«˜è¡€å‹æ˜¯å¿ƒè¡€ç®¡ç–¾ç—…çš„é‡è¦å±é™©å› ç´ ã€‚é¢„é˜²æªæ–½åŒ…æ‹¬ï¼šä¿æŒå¥åº·ä½“é‡ã€å‡å°‘ç›åˆ†æ‘„å…¥ã€è§„å¾‹è¿åŠ¨ã€é™åˆ¶é…’ç²¾ã€æˆ’çƒŸã€ç®¡ç†å‹åŠ›ã€å®šæœŸç›‘æµ‹è¡€å‹ã€‚æ­£å¸¸è¡€å‹åº”ä½äº120/80 mmHgã€‚', category: 'æ…¢ç—…é¢„é˜²', sortOrder: 1 },
  { title: 'ç³–å°¿ç—…é¢„é˜²', content: '2å‹ç³–å°¿ç—…åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å¯ä»¥é¢„é˜²çš„ã€‚é¢„é˜²å»ºè®®ï¼šä¿æŒå¥åº·ä½“é‡ã€è§„å¾‹è¿åŠ¨ï¼ˆæ¯å‘¨è‡³å°‘150åˆ†é’Ÿï¼‰ã€é€‰æ‹©å…¨è°·ç‰©å’Œé«˜çº¤ç»´é£Ÿç‰©ã€é™åˆ¶ç³–åˆ†å’Œç²¾åˆ¶ç¢³æ°´åŒ–åˆç‰©ã€å®šæœŸæ£€æŸ¥è¡€ç³–ã€‚', category: 'æ…¢ç—…é¢„é˜²', sortOrder: 2 },
  { title: 'å¿ƒè„å¥åº·ä¿æŠ¤', content: 'ä¿æŠ¤å¿ƒè„å¥åº·çš„æ–¹æ³•ï¼šæˆ’çƒŸã€æ§åˆ¶è¡€å‹å’Œè¡€è„‚ã€ä¿æŒå¥åº·ä½“é‡ã€è§„å¾‹è¿åŠ¨ã€å¥åº·é¥®é£Ÿï¼ˆå¤šåƒæ°´æœè”¬èœã€å‡å°‘é¥±å’Œè„‚è‚ªï¼‰ã€é™åˆ¶é…’ç²¾ã€ç®¡ç†å‹åŠ›ã€‚', category: 'æ…¢ç—…é¢„é˜²', sortOrder: 3 },
];

// è¿åŠ¨å»ºè®®æ•°æ®
const exerciseAdvice = [
  // æ™´å¤©è¿åŠ¨
  { name: 'æˆ·å¤–è·‘æ­¥', description: 'åœ¨å…¬å›­æˆ–è·‘é“ä¸Šè¿›è¡Œæ…¢è·‘æˆ–å¿«è·‘ã€‚è·‘æ­¥æ˜¯æœ€ç®€å•æœ‰æ•ˆçš„æœ‰æ°§è¿åŠ¨ï¼Œèƒ½å¢å¼ºå¿ƒè‚ºåŠŸèƒ½ã€ç‡ƒçƒ§å¡è·¯é‡Œã€æ”¹å–„å¿ƒæƒ…ã€‚å»ºè®®ç©¿ç€ä¸“ä¸šè·‘é‹ï¼Œé€‰æ‹©å¹³å¦çš„è·¯é¢ã€‚', weather: 'sunny', timeSlot: 'morning', intensity: 'medium', duration: 30, caloriesBurned: 300 },
  { name: 'éª‘è‡ªè¡Œè½¦', description: 'éª‘è‡ªè¡Œè½¦æ˜¯ä¸€ç§ä½å†²å‡»çš„æœ‰æ°§è¿åŠ¨ï¼Œå¯¹å…³èŠ‚å‹åŠ›å°ï¼Œé€‚åˆå„å¹´é¾„æ®µã€‚å¯ä»¥é€‰æ‹©å…¬è·¯éª‘è¡Œæˆ–å±±åœ°éª‘è¡Œï¼Œå»ºè®®ä½©æˆ´å¤´ç›”ï¼Œæ³¨æ„äº¤é€šå®‰å…¨ã€‚', weather: 'sunny', timeSlot: 'morning', intensity: 'medium', duration: 45, caloriesBurned: 400 },
  { name: 'æˆ·å¤–æ¸¸æ³³', description: 'åœ¨æˆ·å¤–æ³³æ± æˆ–å®‰å…¨çš„è‡ªç„¶æ°´åŸŸæ¸¸æ³³ã€‚æ¸¸æ³³æ˜¯å…¨èº«è¿åŠ¨ï¼Œèƒ½é”»ç‚¼å‡ ä¹æ‰€æœ‰è‚Œè‚‰ç¾¤ï¼ŒåŒæ—¶å¯¹å…³èŠ‚å‹å¥½ã€‚å»ºè®®åœ¨æœ‰æ•‘ç”Ÿå‘˜çš„åœ°æ–¹æ¸¸æ³³ã€‚', weather: 'sunny', timeSlot: 'afternoon', intensity: 'high', duration: 45, caloriesBurned: 450 },
  { name: 'æˆ·å¤–ç‘œä¼½', description: 'åœ¨å…¬å›­æˆ–è‰åªä¸Šè¿›è¡Œç‘œä¼½ç»ƒä¹ ã€‚æˆ·å¤–ç‘œä¼½å¯ä»¥å¸®åŠ©æ”¾æ¾èº«å¿ƒï¼Œå‘¼å¸æ–°é²œç©ºæ°”ï¼Œäº«å—å¤§è‡ªç„¶çš„ç¾æ™¯ã€‚', weather: 'sunny', timeSlot: 'morning', intensity: 'low', duration: 45, caloriesBurned: 150 },
  
  // å¤šäº‘å¤©æ°”è¿åŠ¨
  { name: 'å¿«èµ°', description: 'ä»¥æ¯åˆ†é’Ÿ100-120æ­¥çš„é€Ÿåº¦å¿«èµ°ï¼Œæ˜¯æœ€é€‚åˆåˆå­¦è€…çš„æœ‰æ°§è¿åŠ¨ã€‚å¯ä»¥åœ¨ç¤¾åŒºã€å…¬å›­æˆ–å•†åœºè¿›è¡Œï¼Œæ— éœ€ç‰¹æ®Šè£…å¤‡ã€‚', weather: 'cloudy', timeSlot: 'all', intensity: 'low', duration: 30, caloriesBurned: 150 },
  { name: 'ç¾½æ¯›çƒ', description: 'ç¾½æ¯›çƒæ˜¯ä¸€é¡¹æœ‰è¶£çš„è¿åŠ¨ï¼Œèƒ½é”»ç‚¼ååº”é€Ÿåº¦ã€åè°ƒæ€§å’Œè€åŠ›ã€‚å¯ä»¥åœ¨å®¤å†…æˆ–å®¤å¤–è¿›è¡Œï¼Œé€‚åˆåŒäººæˆ–å¤šäººå‚ä¸ã€‚', weather: 'cloudy', timeSlot: 'afternoon', intensity: 'medium', duration: 45, caloriesBurned: 350 },
  { name: 'å¾’æ­¥æ—…è¡Œ', description: 'åœ¨å±±é—´å°è·¯æˆ–è‡ªç„¶æ­¥é“å¾’æ­¥ã€‚å¾’æ­¥æ˜¯äº²è¿‘è‡ªç„¶çš„å¥½æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒéš¾åº¦çš„è·¯çº¿ï¼Œé€‚åˆå„ç§ä½“èƒ½æ°´å¹³ã€‚', weather: 'cloudy', timeSlot: 'morning', intensity: 'medium', duration: 90, caloriesBurned: 400 },
  
  // é›¨å¤©å®¤å†…è¿åŠ¨
  { name: 'å®¤å†…è·³ç»³', description: 'è·³ç»³æ˜¯é«˜æ•ˆçš„æœ‰æ°§è¿åŠ¨ï¼Œ10åˆ†é’Ÿè·³ç»³ç›¸å½“äº30åˆ†é’Ÿæ…¢è·‘çš„çƒ­é‡æ¶ˆè€—ã€‚å¯ä»¥åœ¨å®¶ä¸­æˆ–å¥èº«æˆ¿è¿›è¡Œï¼Œæ˜¯é›¨å¤©çš„ç†æƒ³é€‰æ‹©ã€‚', weather: 'rainy', timeSlot: 'all', intensity: 'high', duration: 15, caloriesBurned: 200 },
  { name: 'å®¤å†…å¥èº«æ“', description: 'è·Ÿéšè§†é¢‘è¿›è¡Œå¥èº«æ“ç»ƒä¹ ï¼Œå¦‚æœ‰æ°§èˆè¹ˆã€HIITè®­ç»ƒç­‰ã€‚æ— éœ€å™¨æï¼Œåœ¨å®¶å°±èƒ½å®Œæˆé«˜æ•ˆé”»ç‚¼ã€‚', weather: 'rainy', timeSlot: 'all', intensity: 'medium', duration: 30, caloriesBurned: 250 },
  { name: 'ç‘œä¼½', description: 'å®¤å†…ç‘œä¼½ç»ƒä¹ ï¼Œä¸“æ³¨äºèº«ä½“æŸ”éŸ§æ€§ã€åŠ›é‡å’Œå¹³è¡¡ã€‚é›¨å¤©çš„å®é™æ°›å›´å¾ˆé€‚åˆè¿›è¡Œå†¥æƒ³å’Œæ”¾æ¾ç»ƒä¹ ã€‚', weather: 'rainy', timeSlot: 'evening', intensity: 'low', duration: 45, caloriesBurned: 150 },
  { name: 'åŠ›é‡è®­ç»ƒ', description: 'ä½¿ç”¨å“‘é“ƒã€å¼¹åŠ›å¸¦æˆ–è‡ªé‡è¿›è¡ŒåŠ›é‡è®­ç»ƒã€‚åŒ…æ‹¬æ·±è¹²ã€ä¿¯å§æ’‘ã€å¹³æ¿æ”¯æ’‘ç­‰åŠ¨ä½œï¼Œå¢å¼ºè‚Œè‚‰åŠ›é‡ã€‚', weather: 'rainy', timeSlot: 'all', intensity: 'medium', duration: 30, caloriesBurned: 200 },
  
  // ç‚çƒ­å¤©æ°”è¿åŠ¨
  { name: 'æ¸…æ™¨ç‘œä¼½', description: 'åœ¨ç‚çƒ­å¤©æ°”ï¼Œé€‰æ‹©æ¸…æ™¨å‡‰çˆ½æ—¶æ®µè¿›è¡Œç‘œä¼½ç»ƒä¹ ã€‚é¿å…ä¸­åˆé«˜æ¸©æ—¶æ®µçš„æˆ·å¤–è¿åŠ¨ï¼Œé˜²æ­¢ä¸­æš‘ã€‚', weather: 'hot', timeSlot: 'morning', intensity: 'low', duration: 30, caloriesBurned: 100 },
  { name: 'å‚æ™šæ•£æ­¥', description: 'åœ¨å‚æ™šæ°”æ¸©ä¸‹é™åè¿›è¡Œæ•£æ­¥ã€‚è½»åº¦è¿åŠ¨åŠ ä¸Šäº«å—è½æ—¥ç¾æ™¯ï¼Œæœ‰åŠ©äºæ”¾æ¾èº«å¿ƒã€‚', weather: 'hot', timeSlot: 'evening', intensity: 'low', duration: 30, caloriesBurned: 100 },
  { name: 'æ°´ä¸­è¿åŠ¨', description: 'æ°´ä¸­å¥èº«æ“æˆ–æ¸¸æ³³æ˜¯ç‚çƒ­å¤©æ°”çš„ç†æƒ³é€‰æ‹©ï¼Œæ—¢èƒ½é”»ç‚¼èº«ä½“ï¼Œåˆèƒ½æ¶ˆæš‘é™æ¸©ã€‚', weather: 'hot', timeSlot: 'afternoon', intensity: 'medium', duration: 45, caloriesBurned: 350 },
  
  // å¯’å†·å¤©æ°”è¿åŠ¨
  { name: 'å®¤å†…çƒ­èº«è¿åŠ¨', description: 'åœ¨å¯’å†·å¤©æ°”ï¼Œè¿›è¡Œå……åˆ†çš„å®¤å†…çƒ­èº«è¿åŠ¨å¾ˆé‡è¦ã€‚åŒ…æ‹¬åŸåœ°è·‘æ­¥ã€å¼€åˆè·³ã€é«˜æŠ¬è…¿ç­‰ï¼Œè®©èº«ä½“æš–å’Œèµ·æ¥ã€‚', weather: 'cold', timeSlot: 'all', intensity: 'medium', duration: 15, caloriesBurned: 100 },
  { name: 'å®¤å†…å•è½¦', description: 'ä½¿ç”¨åŠ¨æ„Ÿå•è½¦è¿›è¡Œå®¤å†…éª‘è¡Œè®­ç»ƒã€‚å¯ä»¥è·Ÿéšè¯¾ç¨‹è¿›è¡Œä¸åŒå¼ºåº¦çš„è®­ç»ƒï¼Œæ˜¯å†¬å­£ä¿æŒæœ‰æ°§èƒ½åŠ›çš„å¥½æ–¹æ³•ã€‚', weather: 'cold', timeSlot: 'all', intensity: 'high', duration: 30, caloriesBurned: 350 },
  
  // å…¨å¤©é€‚å®œè¿åŠ¨
  { name: 'å¤ªææ‹³', description: 'å¤ªææ‹³æ˜¯ä¸€ç§ä½å¼ºåº¦çš„å…¨èº«è¿åŠ¨ï¼Œå¼ºè°ƒå‘¼å¸å’ŒåŠ¨ä½œçš„åè°ƒã€‚é€‚åˆå„å¹´é¾„æ®µï¼Œå°¤å…¶é€‚åˆä¸­è€å¹´äººã€‚', weather: 'all', timeSlot: 'morning', intensity: 'low', duration: 30, caloriesBurned: 100 },
  { name: 'æ™®æ‹‰æ', description: 'æ™®æ‹‰æä¸“æ³¨äºæ ¸å¿ƒåŠ›é‡å’Œèº«ä½“æ§åˆ¶ã€‚é€šè¿‡ç²¾ç¡®çš„åŠ¨ä½œå¢å¼ºæ·±å±‚è‚Œè‚‰ï¼Œæ”¹å–„ä½“æ€å’ŒæŸ”éŸ§æ€§ã€‚', weather: 'all', timeSlot: 'all', intensity: 'medium', duration: 45, caloriesBurned: 200 },
  { name: 'æ•£æ­¥', description: 'æ•£æ­¥æ˜¯æœ€ç®€å•çš„è¿åŠ¨æ–¹å¼ï¼Œé€‚åˆä»»ä½•äººã€‚æ¯å¤©æ•£æ­¥30åˆ†é’Ÿå¯ä»¥æ”¹å–„å¿ƒè¡€ç®¡å¥åº·ã€æå‡å¿ƒæƒ…ã€‚', weather: 'all', timeSlot: 'all', intensity: 'low', duration: 30, caloriesBurned: 100 },
];

async function seedData() {
  console.log('========================================');
  console.log('ğŸŒ± HealthTrack åˆå§‹æ•°æ®å¯¼å…¥');
  console.log('========================================\n');

  const config = {
    host: process.env.DB_HOST || 'localhost',
    port: parseInt(process.env.DB_PORT) || 3306,
    user: process.env.DB_USER || 'root',
    password: process.env.DB_PASSWORD || '',
    database: process.env.DB_NAME || 'healthtrack'
  };

  let connection;

  try {
    connection = await mysql.createConnection(config);
    console.log('âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ\n');

    // æ£€æŸ¥æ˜¯å¦å·²æœ‰æ•°æ®
    const [tipCount] = await connection.query('SELECT COUNT(*) as count FROM health_tips');
    const [exerciseCount] = await connection.query('SELECT COUNT(*) as count FROM exercise_advice');

    if (tipCount[0].count > 0 || exerciseCount[0].count > 0) {
      console.log('âš ï¸  æ•°æ®åº“ä¸­å·²å­˜åœ¨æ•°æ®ï¼Œæ˜¯å¦æ¸…ç©ºåé‡æ–°å¯¼å…¥ï¼Ÿ');
      console.log('   å¦‚éœ€é‡æ–°å¯¼å…¥ï¼Œè¯·æ‰‹åŠ¨æ‰§è¡Œ:');
      console.log('   TRUNCATE TABLE health_tips;');
      console.log('   TRUNCATE TABLE exercise_advice;');
      console.log('\n   æˆ–è€…åˆ é™¤è¿™äº›è¡¨é‡æ–°è¿è¡Œ npm run init-db\n');
      
      // ç»§ç»­å¯¼å…¥ï¼ˆè·³è¿‡å·²å­˜åœ¨çš„æ•°æ®ï¼‰
      console.log('ğŸ“‹ ç»§ç»­å¯¼å…¥ï¼ˆè·³è¿‡å·²å­˜åœ¨çš„æ•°æ®ï¼‰...\n');
    }

    // å¯¼å…¥å¥åº·ç™¾ç§‘
    console.log('ğŸ“š å¯¼å…¥å¥åº·ç™¾ç§‘æ•°æ®...');
    for (const tip of healthTips) {
      try {
        await connection.query(
          `INSERT INTO health_tips (id, title, content, category, sort_order, is_active, created_at) 
           VALUES (?, ?, ?, ?, ?, 1, NOW())`,
          [uuidv4(), tip.title, tip.content, tip.category, tip.sortOrder]
        );
      } catch (e) {
        // å¿½ç•¥é‡å¤æ•°æ®é”™è¯¯
      }
    }
    console.log(`âœ… å¥åº·ç™¾ç§‘å¯¼å…¥å®Œæˆ: ${healthTips.length} æ¡\n`);

    // å¯¼å…¥è¿åŠ¨å»ºè®®
    console.log('ğŸƒ å¯¼å…¥è¿åŠ¨å»ºè®®æ•°æ®...');
    for (const exercise of exerciseAdvice) {
      try {
        await connection.query(
          `INSERT INTO exercise_advice (id, name, description, weather, time_slot, intensity, duration, calories_burned, is_active, created_at) 
           VALUES (?, ?, ?, ?, ?, ?, ?, ?, 1, NOW())`,
          [uuidv4(), exercise.name, exercise.description, exercise.weather, exercise.timeSlot, exercise.intensity, exercise.duration, exercise.caloriesBurned]
        );
      } catch (e) {
        // å¿½ç•¥é‡å¤æ•°æ®é”™è¯¯
      }
    }
    console.log(`âœ… è¿åŠ¨å»ºè®®å¯¼å…¥å®Œæˆ: ${exerciseAdvice.length} æ¡\n`);

    // ç»Ÿè®¡
    const [finalTipCount] = await connection.query('SELECT COUNT(*) as count FROM health_tips');
    const [finalExerciseCount] = await connection.query('SELECT COUNT(*) as count FROM exercise_advice');

    console.log('========================================');
    console.log('ğŸ‰ æ•°æ®å¯¼å…¥å®Œæˆ!');
    console.log('========================================');
    console.log(`ğŸ“š å¥åº·ç™¾ç§‘: ${finalTipCount[0].count} æ¡`);
    console.log(`ğŸƒ è¿åŠ¨å»ºè®®: ${finalExerciseCount[0].count} æ¡`);
    console.log('\nç°åœ¨å¯ä»¥å¯åŠ¨æœåŠ¡å™¨: npm run dev\n');

  } catch (error) {
    console.error('âŒ æ•°æ®å¯¼å…¥å¤±è´¥:', error.message);
    process.exit(1);
  } finally {
    if (connection) {
      await connection.end();
    }
  }
}

seedData();
